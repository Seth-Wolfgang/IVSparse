<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IVSparse: Arithmetic Examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">IVSparse
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   <div id="projectbrief">A sparse matrix compression library.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('arithmetic_examples.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Arithmetic Examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#arithmetic">Arithmetic Operations</a><ul><li class="level2"><a href="#setup">Setup</a></li>
<li class="level2"><a href="#blas">BLAS Routines</a></li>
<li class="level2"><a href="#vec_ops">Vector Operations</a></li>
<li class="level2"><a href="#mat_ops">Matrix Operations</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="arithmetic"></a>
Arithmetic Operations</h1>
<p>There are many ways to perform arithmetic operations on IVSparse Matrices. This page will show you how to perform the basic arithmetic operations on IVSparse Matrices. These can be broken down into a few groups. These are BLAS routines, vector operations, and matrix operations. For dense matrices since IVSparse has no dense format the Eigen Linear Algebra Library is used for returns of dense matrices and vectors.</p>
<h2><a class="anchor" id="setup"></a>
Setup</h2>
<p>Firstly, to set up some examples we need to create some matrices and vectors. Here are some examples of how to do that:</p>
<div class="fragment"><div class="line"><span class="comment">// IVSparse Matrix</span></div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> exampleMatrix(values, rowIndices, colIndices, numRows, numCols, numNonZeros);</div>
<div class="line"> </div>
<div class="line">exampleMatrix.print();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// IVSparse Vector</span></div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix_1_1_vector.html">IVSparse::SparseMatrix&lt;double&gt;::Vector</a> exampleVector(exampleMatrix, 0);</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;IVSparse Vector: &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">exampleVector.print();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Eigen Sparse Matrix</span></div>
<div class="line">Eigen::SparseMatrix&lt;double&gt; eigenMatrix = exampleMatrix.toEigen();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Eigen Dense Matrix</span></div>
<div class="line">Eigen::MatrixXi eigenDenseMatrix(5, 4);</div>
<div class="line">eigenDenseMatrix &lt;&lt; 0, 6, 4, 1,</div>
<div class="line">                    3, 9, 0, 0,</div>
<div class="line">                    0, 0, -5, -10,</div>
<div class="line">                    9, 8, 7, 6,</div>
<div class="line">                    0, 0, 0, 0;</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Eigen Dense Matrix: &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">std::cout &lt;&lt; eigenDenseMatrix &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Eigen Dense Vector</span></div>
<div class="line">Eigen::VectorXi eigenVector(5);</div>
<div class="line">eigenVector &lt;&lt; 1, 2, 3, 4, 5;</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Eigen Dense Vector: &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">std::cout &lt;&lt; eigenVector &lt;&lt; std::endl;</div>
<div class="ttc" id="aclass_i_v_sparse_1_1_sparse_matrix_1_1_vector_html"><div class="ttname"><a href="class_i_v_sparse_1_1_sparse_matrix_1_1_vector.html">IVSparse::SparseMatrix::Vector</a></div><div class="ttdef"><b>Definition:</b> IVCSC_Vector.hpp:27</div></div>
<div class="ttc" id="aclass_i_v_sparse_1_1_sparse_matrix_html"><div class="ttname"><a href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix</a></div><div class="ttdef"><b>Definition:</b> IVCSC_SparseMatrix.hpp:27</div></div>
</div><!-- fragment --><p>The above code will print out the following:</p>
<div class="fragment"><div class="line">IVSparse Matrix:</div>
<div class="line"> </div>
<div class="line">4 0 3 0 2 </div>
<div class="line">0 4 0 2 0 </div>
<div class="line">4 0 3 0 1 </div>
<div class="line">0 2 0 2 0 </div>
<div class="line">3 0 4 0 3</div>
<div class="line"> </div>
<div class="line">IVSparse Vector:</div>
<div class="line">4 0 4 0 3</div>
<div class="line"> </div>
<div class="line">Eigen Dense Matrix:</div>
<div class="line">  0   6   4   1</div>
<div class="line">  3   9   0   0</div>
<div class="line">  0   0  -5 -10</div>
<div class="line">  9   8   7   6</div>
<div class="line">  0   0   0   0</div>
<div class="line"> </div>
<div class="line">Eigen Dense Vector:</div>
<div class="line">1 </div>
<div class="line">2 </div>
<div class="line">3 </div>
<div class="line">4 </div>
<div class="line">5</div>
</div><!-- fragment --><h2><a class="anchor" id="blas"></a>
BLAS Routines</h2>
<p>For BLAS routines IVSparse supports the following:</p>
<ul>
<li>Scalar Multiplication (Level 1)</li>
<li>SpMV (Level 2)</li>
<li>SpMM (Level 3)</li>
</ul>
<p><em>Scalar Multiplication</em></p>
<p>Starting with scalar multiplication there is both an in-place and new return version of this method. The in-place version is done with the <code>*=</code> operator and the new return version is done with the <code>*</code> operator. This operation goes through the entire matrix and multiplies each value. In VCSC this is very fast due to keeping only unique values for a column in contiguous memory. Here are some examples:</p>
<div class="fragment"><div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> scalarMultMatrix = exampleMatrix * 2;</div>
<div class="line"> </div>
<div class="line">scalarMultMatrix.<a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html#a388f572c62279f839ee138a9afbdeeb5">print</a>();</div>
<div class="line"> </div>
<div class="line">exampleMatrix *= 2;</div>
<div class="line">exampleMatrix.print();</div>
<div class="ttc" id="aclass_i_v_sparse_1_1_sparse_matrix_html_a388f572c62279f839ee138a9afbdeeb5"><div class="ttname"><a href="class_i_v_sparse_1_1_sparse_matrix.html#a388f572c62279f839ee138a9afbdeeb5">IVSparse::SparseMatrix::print</a></div><div class="ttdeci">void print()</div><div class="ttdef"><b>Definition:</b> IVCSC_Methods.hpp:64</div></div>
</div><!-- fragment --><p>The above code will print out the following:</p>
<div class="fragment"><div class="line">IVSparse Matrix:</div>
<div class="line"> </div>
<div class="line">8 0 6 0 4 </div>
<div class="line">0 8 0 4 0 </div>
<div class="line">8 0 6 0 2 </div>
<div class="line">0 4 0 4 0 </div>
<div class="line">6 0 8 0 6 </div>
<div class="line"> </div>
<div class="line">IVSparse Matrix:</div>
<div class="line"> </div>
<div class="line">8 0 6 0 4 </div>
<div class="line">0 8 0 4 0 </div>
<div class="line">8 0 6 0 2 </div>
<div class="line">0 4 0 4 0 </div>
<div class="line">6 0 8 0 6 </div>
</div><!-- fragment --><p><em>SpMV</em></p>
<p>For multiplying a IVSparse Matrix by a vector there are two supported ways of doing this, using Eigen vectors or IVSparse vectors. This is done in O(n^2) and is slower than the Eigen implementation of this routine. Since the multiplication process is the same for both the example will only use Eigen vectors for simplicity. Here are some examples:</p>
<div class="fragment"><div class="line">Eigen::VectorXi eigenResult = exampleMatrix * eigenVector;</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Eigen Result: &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">std::cout &lt;&lt; eigenResult &lt;&lt; std::endl;</div>
</div><!-- fragment --><p>The above code will print out the following:</p>
<div class="fragment"><div class="line">Eigen Result:</div>
<div class="line">23</div>
<div class="line">16</div>
<div class="line">18</div>
<div class="line">12</div>
<div class="line">30</div>
</div><!-- fragment --><p><em>SpMM</em></p>
<p>For multiplying an IVSparse Matrix by a dense matrix the only supported way is by using an Eigen matrix to multiply. This algorithm is done in O(n^3) and returns an Eigen::Matrix. Currently there is only support for Sparse * Dense operations. Here are some examples:</p>
<div class="fragment"><div class="line">Eigen::MatrixXi eigenMatrixResult = exampleMatrix * eigenDenseMatrix;</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Eigen Matrix Result: &quot;</span> &lt;&lt; std::endl;</div>
<div class="line">std::cout &lt;&lt; eigenMatrixResult &lt;&lt; std::endl;</div>
</div><!-- fragment --><p>The above code will print out the following:</p>
<div class="fragment"><div class="line">Eigen Matrix Result:</div>
<div class="line">  0  24   1 -26</div>
<div class="line"> 30  52  14  12</div>
<div class="line">  0  24   1 -26</div>
<div class="line"> 24  34  14  12</div>
<div class="line">  0  18  -8 -37</div>
</div><!-- fragment --><h2><a class="anchor" id="vec_ops"></a>
Vector Operations</h2>
<p>Vector operations that IVSparse supports are norm, sum, and dot products with eigen vectors. Some notes are that because of the support for eigen vectors only in dot products its impossible to take the dot product of a IVSparse Vector with itself but this is something we intend to add in future work. Here are some examples:</p>
<div class="fragment"><div class="line"><span class="comment">// norm</span></div>
<div class="line"><span class="keywordtype">double</span> norm = exampleVector.norm();</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Norm: &quot;</span> &lt;&lt; norm &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// sum</span></div>
<div class="line"><span class="keywordtype">double</span> sum = exampleVector.sum();</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Sum: &quot;</span> &lt;&lt; sum &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// dot product</span></div>
<div class="line"><span class="keywordtype">double</span> dotProduct = exampleVector.dot(eigenVector);</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Dot Product: &quot;</span> &lt;&lt; dotProduct &lt;&lt; std::endl;</div>
</div><!-- fragment --><p>The above code will print out the following:</p>
<div class="fragment"><div class="line">Norm: 6.40312</div>
<div class="line">Sum: 11</div>
<div class="line">Dot Product: 31</div>
</div><!-- fragment --><h2><a class="anchor" id="mat_ops"></a>
Matrix Operations</h2>
<p>There are a number of matrix operations supported for IVSparse compression formats. These are:</p>
<ul>
<li>Inner/Outer Sums</li>
<li>Max/Min Col/Row Coefficients</li>
<li>Trace</li>
<li>Sum</li>
<li>Norm</li>
<li>Vector Length</li>
</ul>
<p>These are supported for all compression formats and are fairly self explanitory.</p>
<div class="fragment"><div class="line">Example Matrix:</div>
<div class="line">4 0 3 0 2 </div>
<div class="line">0 4 0 2 0 </div>
<div class="line">4 0 3 0 1 </div>
<div class="line">0 2 0 2 0 </div>
<div class="line">3 0 4 0 3</div>
</div><!-- fragment --><p> <em>Outer/Inner Sums</em></p>
<p>Outer sums returns a vector where each element is the sum of the corresponding outer dimension of the matrix. For column major matrices outer sum will return a vector of all sums for each column. Inner sums is the same but for the inner dimesion. This method is also very efficient for VCSC due to the value compression techniques.</p>
<div class="fragment"><div class="line">std::vector&lt;double&gt; outerSums = exampleMatrix.outerSums();</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Outer Sums: &quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> sum : outerSums) {</div>
<div class="line">    std::cout &lt;&lt; sum &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><div class="fragment"><div class="line">11 6 10 4 6</div>
</div><!-- fragment --><p><em>Max/Min Col/Row Coefficients</em></p>
<p>This is a set of four methods that return a vector of the minimum or maximum coefficents in either each column or row. These are used to find out information about the matrix such as the range of values across rows or columns. These are also very efficient for VCSC due to the value compression techniques.</p>
<div class="fragment"><div class="line"><span class="comment">// Max column coefficients</span></div>
<div class="line">std::vector&lt;double&gt; maxColCoeffs = exampleMatrix.maxColCoeffs();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Min column coefficients</span></div>
<div class="line">std::vector&lt;double&gt; minColCoeffs = exampleMatrix.minColCoeffs();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// range of column coefficients</span></div>
<div class="line">std::vector&lt;double&gt; colRanges(maxColCoeffs.size());</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; maxColCoeffs.size(); i++) {</div>
<div class="line">    colRanges[i] = maxColCoeffs[i] - minColCoeffs[i];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Column Ranges: &quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> range : colRanges) {</div>
<div class="line">    std::cout &lt;&lt; range &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><div class="fragment"><div class="line">Column Ranges:</div>
<div class="line">4 4 4 2 3</div>
</div><!-- fragment --><p><em>Trace</em></p>
<p>Trace returns the sum of the diagonal of the matrix. This is a very simple method that is supported for all compression formats.</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> trace = exampleMatrix.trace();</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Trace: &quot;</span> &lt;&lt; trace &lt;&lt; std::endl;</div>
</div><!-- fragment --><div class="fragment"><div class="line">Trace: 16</div>
</div><!-- fragment --><p><em>Sum</em></p>
<p>Sum returns the sum of all values in the matrix. This is a very simple method that is supported for all compression formats.</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> sum = exampleMatrix.sum();</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Sum: &quot;</span> &lt;&lt; sum &lt;&lt; std::endl;</div>
</div><!-- fragment --><div class="fragment"><div class="line">Sum: 37</div>
</div><!-- fragment --><p><em>Norm</em></p>
<p>Norm returns the Frobenius norm of the matrix. The Frobenius Norm is the sum of the squares of all the matrix coefficients. This is a very simple method that is supported for all compression formats.</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> norm = exampleMatrix.norm();</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Norm: &quot;</span> &lt;&lt; norm &lt;&lt; std::endl;</div>
</div><!-- fragment --><div class="fragment"><div class="line">Norm: 10.8167</div>
</div><!-- fragment --><p><em>Vector Length</em></p>
<p>Vector length returns the length of the indicated vector. This is calculated by taking the square root of the sum of squares of the vector coefficients. This is a very simple method that is supported for all compression formats.</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> vectorLength = exampleVector.vectorLength(0);</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Vector Length: &quot;</span> &lt;&lt; vectorLength &lt;&lt; std::endl;</div>
</div><!-- fragment --><div class="fragment"><div class="line">Vector Length: 6.40312</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jul 20 2023 15:15:27 for IVSparse by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
