<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IVSparse: Construction Examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">IVSparse
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   <div id="projectbrief">A sparse matrix compression library.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('construction_example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Construction Examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#constructors">Constructors</a><ul><li class="level2"><a href="#default">Default Constructor</a></li>
</ul>
</li>
<li class="level1"><a href="#outside_formats">Loading Data into IVSparse</a><ul><li class="level2"><a href="#coo">COO Input Data</a></li>
<li class="level2"><a href="#raw_csc">Raw CSC Input Data</a></li>
<li class="level2"><a href="#eigen">Eigen Sparse Matrix Input Data</a></li>
</ul>
</li>
<li class="level1"><a href="#moving_data">Moving Data in IVSparse</a><ul><li class="level2"><a href="#file">File Constructor</a></li>
</ul>
</li>
<li class="level1"><a href="#conversion">Conversion/Copy Constructors</a><ul><li class="level2"><a href="#vector_constructors">Vector Constructors</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="constructors"></a>
Constructors</h1>
<p>These are the constructors offered by the different formats.</p>
<ul>
<li>Default Constructor - Creates an empty matrix</li>
<li>Eigen Constructor - Creates a matrix from an Eigen Sparse Matrix</li>
<li>COO Constructor - Creates a matrix from COO data</li>
<li>CSC Constructor - Creates a matrix from CSC data</li>
<li>Copy Constructor - Creates a matrix from another matrix</li>
<li>Conversion Constructor - Creates a matrix from another format</li>
<li>Vector Constructor - Creates a matrix from a vector</li>
<li>Array of Vectors Constructor - Creates a matrix from an array of vectors</li>
<li>File Constructor - Creates a matrix from a file</li>
</ul>
<h2><a class="anchor" id="default"></a>
Default Constructor</h2>
<p>The default constructor has no use other than to create an empty matrix. Since it is not possible to insert values into an IVSparse Matrix after construction this is only useful for creating a matrix to be overwritten later. It's also worth mentioning that IVCSC also has a construtor that allows for the specification of rows and columns for an empty matrix. This is essentially the same as the default constructor but allows for the specification of rows and columns.</p>
<div class="fragment"><div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> matrix();</div>
<div class="ttc" id="aclass_i_v_sparse_1_1_sparse_matrix_html"><div class="ttname"><a href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix</a></div><div class="ttdef"><b>Definition:</b> IVCSC_SparseMatrix.hpp:29</div></div>
</div><!-- fragment --><h1><a class="anchor" id="outside_formats"></a>
Loading Data into IVSparse</h1>
<p>This is how to load data into IVSparse from outside sources using COO, CSC, or Eigen.</p>
<h2><a class="anchor" id="coo"></a>
COO Input Data</h2>
<p>First is loading data in using COO which is a very common format for sparse data such as Matrix Market. IVSparse takes in a vector of tuples where each tuple is (row, column, value). The vector doesn't need to be sorted but does need to contian no duplicates.</p>
<div class="fragment"><div class="line">std::vector&lt;std::tuple&lt;uint32_t, uint32_t, double&gt;&gt; cooData = {</div>
<div class="line">    {0, 0, 1},</div>
<div class="line">    {1, 1, 2},</div>
<div class="line">    {2, 2, 3},</div>
<div class="line">    {3, 3, 4}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> rows = 4;</div>
<div class="line"><span class="keywordtype">int</span> cols = 4;</div>
<div class="line"><span class="keywordtype">int</span> nnz = 4;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> matrix(cooData, rows, cols, nnz);</div>
</div><!-- fragment --><h2><a class="anchor" id="raw_csc"></a>
Raw CSC Input Data</h2>
<p>It's also easy for IVSparse to use raw CSC data to construct matrices and is often used as well for sparse applications. IVSparse takes in pointers to the three arrays for CSC/CSR and the metadata needed about the matrix. The arrays do need to follow CSC format conventions and given the correct storage order. For example if using CSC data make a column major matrix, if using CSR data make a row major matrix. An example for using raw CSC pointers is shown below:</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> values[4] = {1, 2, 3, 4};</div>
<div class="line">uint32_t rowIndices[4] = {0, 1, 2, 3};</div>
<div class="line">uint32_t outerPointers[5] = {0, 1, 2, 3, 4};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> rows = 4;</div>
<div class="line"><span class="keywordtype">int</span> cols = 4;</div>
<div class="line"><span class="keywordtype">int</span> nnz = 4;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> matrix(values, rowIndices, outerPointers, rows, cols, nnz);</div>
</div><!-- fragment --><h2><a class="anchor" id="eigen"></a>
Eigen Sparse Matrix Input Data</h2>
<p>The easiest way to make an IVSparse Matrix is to construct one from an already existing Eigen sparse matrix. Eigen sparse matrices are just CSC matrices so the process is the same as the CSC example above but with far less parameters for the programmer to manage. IVSparse can also take either column or row major Eigen sparse matrices. An example of this is shown below:</p>
<div class="fragment"><div class="line">Eigen::SparseMatrix&lt;double&gt; eigenMatrix(4, 4);</div>
<div class="line">eigenMatrix.insert(0, 0) = 1;</div>
<div class="line">eigenMatrix.insert(1, 1) = 2;</div>
<div class="line">eigenMatrix.insert(2, 2) = 3;</div>
<div class="line">eigenMatrix.insert(3, 3) = 4;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> matrix(eigenMatrix);</div>
</div><!-- fragment --><h1><a class="anchor" id="moving_data"></a>
Moving Data in IVSparse</h1>
<p>There are many ways to move data around in IVSparse once in one of the three formats supported. The main ways are by using the copy constructor, the conversion constructor, the assignment operator, the file constructor, or the vector constructors.</p>
<h2><a class="anchor" id="file"></a>
File Constructor</h2>
<p>Constructing from a file is one of the easiest ways to move data around. Simply save a matrix on disk using the <code>.write()</code> method and simply load it in with the same template parameters as the matrix saved. An example of this is shown below:</p>
<div class="fragment"><div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> exampleMatrix(values, rowIndices, outerPointers, rows, cols, nnz);</div>
<div class="line">exampleMatrix.write();</div>
<div class="line"> </div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> matrix(<span class="stringliteral">&quot;exampleMatrix.ivs&quot;</span>);</div>
</div><!-- fragment --><h2><a class="anchor" id="conversion"></a>
Conversion/Copy Constructors</h2>
<p>It's simple to copy or move between compression levels in IVSparse. To deep copy a matrix just use one matrix as the parameter to the constructor of another matrix of the same template parameters. To convert between compression levels do the same thing except the compression level parameter can be different and the constructor will do the conversion itself. An example of this is shown below:</p>
<div class="fragment"><div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> exampleMatrix(values, rowIndices, outerPointers, rows, cols, nnz);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Copies exampleMatrix</span></div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> copyMatrix(exampleMatrix);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Converts exampleMatrix to VCSC and then copies it</span></div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double, uint64_t, 2&gt;</a> conversionMatrix(exampleMatrix);</div>
</div><!-- fragment --><h2><a class="anchor" id="vector_constructors"></a>
Vector Constructors</h2>
<p>The last primary way to move data in IVSparse is through the use of vectors. There are two vector constructors to make an IVSparse Matrix, the single vector constructor and the array of vectors constructor. The single vector constructor simply turns a vector into a matrix with a single row or column. The array of vectors constructor takes in an array of vectors and turns it into a matrix. An example of this is shown below:</p>
<div class="fragment"><div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> exampleMatrix(values, rowIndices, outerPointers, rows, cols, nnz);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// get vectors from exampleMatrix</span></div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix_1_1_vector.html">IVSparse::SparseMatrix&lt;double&gt;::Vector</a> vector1(exampleMatrix, 0);</div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix_1_1_vector.html">IVSparse::SparseMatrix&lt;double&gt;::Vector</a> vector2(exampleMatrix, 1);</div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix_1_1_vector.html">IVSparse::SparseMatrix&lt;double&gt;::Vector</a> vector3(exampleMatrix, 2);</div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix_1_1_vector.html">IVSparse::SparseMatrix&lt;double&gt;::Vector</a> vector4(exampleMatrix, 3);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Make a matrix from a single vector</span></div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> singleVectorMatrix(vector1);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Make a matrix from an array of vectors</span></div>
<div class="line">std::vector&lt;IVSparse::SparseMatrix&lt;double&gt;::Vector&gt; vectors = {vector1, vector2, vector3, vector4};</div>
<div class="line"><a class="code" href="class_i_v_sparse_1_1_sparse_matrix.html">IVSparse::SparseMatrix&lt;double&gt;</a> arrayOfVectorsMatrix(vectors);</div>
<div class="ttc" id="aclass_i_v_sparse_1_1_sparse_matrix_1_1_vector_html"><div class="ttname"><a href="class_i_v_sparse_1_1_sparse_matrix_1_1_vector.html">IVSparse::SparseMatrix::Vector</a></div><div class="ttdef"><b>Definition:</b> IVCSC_Vector.hpp:25</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Aug 1 2023 19:28:00 for IVSparse by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
